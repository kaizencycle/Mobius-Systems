# NPM Configuration for Mobius Systems
# Security-hardened dependency management
# Last updated: 2025-11-10 (ATLAS Sentinel Optimization)

# ===================================
# SECURITY SETTINGS (MII Security+)
# ===================================

# Enable audit during install to detect vulnerabilities early
audit=true
audit-level=moderate

# Strict SSL for secure package downloads
strict-ssl=true

# Only use npm registry (prevent man-in-the-middle attacks)
registry=https://registry.npmjs.org/

# ===================================
# DEPENDENCY RESOLUTION
# ===================================

# LEGACY-PEER-DEPS: Temporary workaround for Hardhat toolbox conflicts
# TODO: Remove after migrating to Hardhat v3.x or resolving peer conflicts
# Tracked in: github.com/kaizencycle/Mobius-Systems/issues/TBD
legacy-peer-deps=true

# Auto-install peer dependencies (reduces manual intervention)
auto-install-peers=true

# Allow peer dependency version mismatches (legacy compatibility)
# NOTE: This reduces security - review regularly
strict-peer-dependencies=false

# ===================================
# WORKSPACE OPTIMIZATION
# ===================================

# Hoist shared dependencies to root (faster installs, smaller footprint)
shamefully-hoist=true
node-linker=hoisted

# ===================================
# PERFORMANCE
# ===================================

# Enable concurrent downloads
maxsockets=15

# Use package-lock for reproducible builds
package-lock=true

# ===================================
# INTEGRITY & PROVENANCE
# ===================================

# Verify package signatures when available
# Note: Not all packages support signatures yet
# signature-check=true  # Uncomment when ecosystem adoption increases

# Save exact versions (reproducible builds)
save-exact=true

# Engine strict: fail if Node version doesn't match package.json
engine-strict=true
